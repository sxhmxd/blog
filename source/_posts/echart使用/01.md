---
title: echarts 总结
categories: [echarts使用]
---


### echarts 属性说明

```JSON

 {
        "backgroundColor": "#f6f6f6",  // 图形的背景色
        "tooltip": {                   // 鼠标移上显示详细信息
          "trigger": "axis", 
          "axisPointer": {
            "type": "line",
            "lineStyle": {
              "type": "dashed",
              "color": "#28BBAB",
            },
          },
        },
        "grid": {                   // 图形的页面布局
          "width": "90%",
          "height": "82%",
          "left": "5%",
          "right": "1%",
          "bottom": "12%",
          // containLabel: true
        },
        "toolbox": {            // 右侧工具条
          "feature": {
            "dataZoom": {
              "yAxisIndex": false,
            },
            "brush": {
              "type": [""],
            },
          },
        },
        "brush": {
          // xAxisIndex: "All",
          // yAxisIndex: "ALL",
          "outOfBrush": {
            "colorAlpha": 0.5,
          },
        },
        "xAxis": {              // x 轴样式设置
          "type": "category",
          "splitLine": {
            // x 轴分割线样式
            "show": true,
            "lineStyle": {
              "color": "#ebeef5",
              "width": 1,
            },
          },
          "axisLabel": {
            "margin": 5,
            "textStyle": {
              "color": "#233551",
              "fontSize": 12,
              "fontWeight": "bold",
            },
          },
          "axisTick": {
            "show": true,
            "lineStyle": {
              "type": "",
              "color": "#383E56",
            },
          },
          "axisLine": {
            "show": true,
            "lineStyle": {
              "width": 2,
            },
          },
          "boundaryGap": false,     // 是否从坐标原点起始
          "data": [],
        },
        "yAxis": {                  // y 轴样式设置
          "type": "value",
          // onZreo: true,
          "axisTick": {
            "show": true,
            "lineStyle": {
              "type": "",
            },
          },
          "splitLine": {
            // y 轴分割线样式
            "show": true,
            "lineStyle": {
              "color": "#ebeef5",
              "width": 1,
            },
          },
          "axisLabel": {
            "margin": 10,
            "textStyle": {
              "color": "#233551",
              "fontSize": 12,
              "fontWeight": "bold",
            },
          },
          "axisLine": {
            "show": true,
            "lineStyle": {
              "width": 2,
            },
          },
        },
        "series": [     // 绘制线条设置
          { 
            // sampling: "average",  //数据过多时，考虑这个属性
            "showSymbol": true,      // 折线链接点是否显示原点
            "hoverAnimation": true,  // 鼠标移上动画 
            "animation": true,       // 动画
            "name": "",              // 线条名称
            "data": [],
            "id": "",                // 设置线条id 
            "step": "start",
            "type": "line",          // 设置图形的样式 折线 
            "itemStyle": {
              "normal": {
                "color": "",
              },
            },
          }
        ],
        "dataZoom": [            // 缩放工具条
          {
            "type": "slider",
            // id: "sliderX",
            "show": true,
            "height": 26,
            "xAxisIndex": 0,
            "start": 0,
            "end": 100,
            "startValue": "", //数据窗口范围的起始数值
            "endValue": "", //数据窗口范围的结束数值。
            "bottom": 15,
            "brushSelect": true,
            "realtime": false,
            // filterMode: "empty",

            // filterMode: "none",
          },
          {
            "type": "inside",
            "xAxisIndex": [0],
          },
        ],
      };
```
### setOption的使用
   echrts.setOption(option)
   ```TypeScript
    setOptions的参数
   (option: Object, notMerge?: boolean, lazyUpdate?: boolean)
    or
    (option: Object, opts?: {
        notMerge?: boolean;
        replaceMerge?: string | string[];
        lazyUpdate?: boolean;
    })
   ```
   1、直接使用替换掉原来的option 
     存在的问题：1、数据添加没有问题，当删除某一条线时，echarts 图没有去掉对应的线   
                2、全部替换相当于图形重置，之前的缩放状态重置
     解决 1问题的 方法，启用setOption 的第二个参数 notMerge 
      echrts.setOption(option,true) notMerge为true 表示旧的组件会被完全移除，新的组件会根据option创建。
  * 如果设置opts.notMerge为false，或者没有设置 opts.notMerge：
      * 如果在opts.replaceMerge里指定组件类型，这类组件会进行替换合并。
      * 否则，会进行普通合并。
- 普通合并
  * 对于一种类型的组件（如：xAxis, series），新来的 option 中的每个“组件描述”（如：{type: 'xAxis', id: 'xx', name: 'kk', ...}）会被尽量合并到已存在的组件中。剩余的情况，会在组件列表尾部创建新的组件。整体规则细节如下：
    * 先依次对 option 中每个有声明 id 或者 name 的“组件描述”，寻找能匹配其 id 或者 name 的已有的组件，找到的话则合并。
    * 再依次对 option 中剩余的“组件描述”，寻找还未执行过前一条的已有组件，找到的话则合并。
    * 其他 option 中剩余的“组件描述”，用于在组件列表尾部创建新组件。
  特点：
    * 永远不会删除已存在的组件。也就是说，只支持增加，或者更新组件。
    * 组件的索引（componentIndex）永远不会改变。
    * 如果 id 和 name 没有在 option 中被指定（这是经常出现的情况），组件会按照它在 option 中的顺序一一合并到已有组件中。这种设定比较符合直觉。
- 替换合并
    对于一种类型的组件（如：xAxis, series），只有 option 中指定了 id 并且已有组件中有此 id 时，已有组件会和 option 相应组件描述进行合并。否则，已有组件都会删除，新组件会被根据 option 创建。细节规则如下：
      * 先依次对 option 中每个有声明 id 的“组件描述”，寻找能匹配其 id 或者 name 的已有的组件，找到的话则合并。
      * 删除其他没匹配到的已有组件。
      * 依次对 option 中剩余的“组件描述”，创建新组件，填入刚因删除而空出来的位置上，或者增加到末尾。
    特点：
      * 与 普通合并 相比，支持了组件删除。
      * 已有组件的索引永远不会变。这是为了保证，option 或者 API 中的 index 引用（例如：xAxisIndex: 2）仍能正常一致得使用。
      * 整个处理过程结束后，可能存在一些“洞”，也就是说，在组件列表中的某些 index 上，并没有组件存在（被删除了）。但是这是可以被开发者预期和控制的。
  - 删除组件
    有两种方法能删除组件：
      * 删除所有：使用 notMerge: true，则所有组件都被删除。
      * 删除部分：使用 replaceMerge: [...]，被指定的组件类型，会根据 replaceMerge 的规则：如果 id 匹配就合并（ merge ），否则* 旧组件被删除，新组件被创建。“部分删除” 有助于，在删除该删除的组件时，保留其他组件的状态（如高亮、动画、选中状态）。

 ```JavaScript
   //使用例子
     this.myecharts.setOption(
        {
          series: this.optionS.series,
          xAxis: this.optionS.xAxis,
        },
        {
          replaceMerge: ["xAxis", "series"],
        }
      );
      // 注意点，需要对替换的内容设置唯一id
 ```