---
title: 运算符的扩展,
categories: [ es6,运算符扩展]
---

##  指数运算符

新增了一个指数运算符(**)

  ```
    2**2  // 4 
      2*2
    2**3  // 8
      2*2*2 
  ```
- 指数运算符可以与等号结合，形成一个新的赋值运算符(**=)
  ```
    let a = 1.5 
    a** = 2
      // 等同于 a = a * a 
    let b = 4 
    b** = 3
      // 等同于 b = b * b * b 
  ```
## 链判断运算符

  编程中，如果要读取对象内部的某个属性，往往需要判断一下，属性的上层对象是否存在。对象嵌套太深，判断会需要很多层，这样很是麻烦。
  ES2020引入了 `链判断运算符` `?.`
  ```
   // 之前写法
    var firstName = obj && obj.a && obj.a.b && obj.a.b.c || 'default'
    var fooVlaue = fooInput ? fooInput.value : undefined
    // 现在写法
    var firstName = obj?.a?.b?.c
    var fooVlaue = fooInput?.value
      // 直接链式调用的时候判断，左侧的对象是否为 null 或 undefined。如果是的，就不再往下运算直接返回 null 或者 undefined 。
    iterator.return?.()
      // iterator.return如果有定义，就会调用该方法，否则 iterator.return直接返回undefined，不在执行后面的部分。
  ```
 - 使用 链式判断运算符的注意点
    - 短路机制
      本质上?.运算符相当于一种短路机制，只要不满足条件，就不再往下执行。
    - 括号的影响
      如果属性链有圆括号，链判断运算符对圆括号外部没有影响，只对圆括号内部有影响。
      ```
        (a?.b).c
        // 等价于 (a == null ? undefined : a.b).c
        不管对象a 是否存在，圆括号后面的.c 总是会执行。
      ```

## Null 判断运算符
  在读取对象属性的时候，如果某个属性的值是null 或者 undefined，有时候需要为他们指定默认值，常用的方法是 || ，但是这样写是错误的，我们的意愿是当为null 或者undefined 的时候给定默认值，但是 当值为 空字符串，false 0 的时候默认值也会生效
  ```
    var param = null/undefined
    var result = param || 'default'
      result   //'default'
    
    var param2 =  false/0
    var result2 = param || 'default'
      result2  //'default'
  ```
  为了避免上面的情况 ES2020 引入一个新的Null 运算符 `??`。它的行为类似 || ,但是只有运算符左侧的值为 null 或 undefined时，才会返回右侧的值。
  ```
    var param = null/undefined
    var result = param ?? 'default'
      result   //'default'
    
    var param2 =  false/0
    var result2 = param ?? 'default'
      result2  // false/0 
  ```
  该运算符的一个目的就是跟链判断运算符?.配合使用，为null 或 undefined 的值设置默认值。
  ```
    var result = obj?.a ?? true
  ```

## 逻辑赋值运算符

ES2021 引入了三个新的逻辑赋值运算符，将逻辑运算符与赋值运算符结合。

```
  // 或赋值运算符
  x||=y
    // 等同于
      x || (x = y)
  // 与赋值运算符
  x &&= y 
    // 等同于
      x && (x = y)
  x ??= y 
    // 先判断x 是否是 null/undefined 是的话 执行 x = y  
 var x = 1
 var y = ''
  x ||= y 
    // 1
  x &&= y 
    // ''
  x ??= y 
    // 1
```
  他们的用途是，为变量或属性设置默认值
  ```
    // 老的写法
    user.id = user.id || 1
    // 新写法
    user.id ||= 1 
  ```